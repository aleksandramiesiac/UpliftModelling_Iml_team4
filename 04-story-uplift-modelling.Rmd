# Story Uplift Modelling: eXplaining colon cancer survival rate after treatment {#story-uplift-modelling}

*Authors: Aleksandra Łuczak (Warsaw University of Technology), Tymoteusz Makowski (Warsaw University of Technology), Kateryna Shulikova (Warsaw School of Economics)*

*Mentors: Miłosz Dobersztyn (McKinsey), Armin Reinert (McKinsey)*

## Introduction 
TODO(oryginał): Put a description of the problem here. 
*indicate the data source. *
We will use data about **Chemotherapy for Stage B/C colon cancer** from `survival` package in R. Dataset avaliable: `survival::colon`. Here's [link](https://stat.ethz.ch/R-manual/R-devel/library/survival/html/colon.html) to destription.


Describe why this problem is important. Indicate the most important literature on the problem.

### What is Uplift Modelling?
 - Czym jest uplift modelling?
 - Gdzie go się stosuje?
 - Jakie problemy możemy modelować (survival & leki, marketing & zysk)?

### Dataset Description
We use data from one of the first successful trials of adjuvant chemotherapy for
colon cancer.There are two type of treatment:

 - Levamisole is a low-toxicity compound previously used to treat worm
infestations in animals and its effects on the treatment of colon cancer have been noted; 
 - 5-FluoroUracyl(FU) is a moderately toxic (as these things go) chemotherapy
agent. This is the 'strongest' one treatment. 

Both of these medications are given after the cancer excision, it's adjutant chemistry, that means 'extra post-operative".

There are two records per person, one for recurrence and one for death.
Dataset contains 16 features described below and 1858 observations

Variable name | Description|Type
--|-----|-
id| id |categorical
study| 	1 for all patients| categorical
rx| Treatment - Observation/Levamisole/Levamisole+5-FluoroUracyl|categorical
sex| Sex od patient - Male/Female |categorical
age| Pateint's age in years | continuous
obstruct| Stenosis of the colon by the cancer, which is blockage by the tumor |binary
perfor| Perforation of colon, that means id there was a hole in the colon| binary
adhere | Adherence to the surrounding organs (e.g. bladder)| binary
nodes | Number of lymph nodes with detectable cancer i.e. during the operation the lymph nodes that were attacked by the cancer are cut out. For the operation to be successful there should be at least 12 lymph nodes.|continuous
time | Days until event or censoring.The time of receiving the treatment is considered to be time = 0, the time that passed in the variable time is the time until death or relapse from receiving the treatment.|continuous
status | Censoring status |binary
differ | Differentiation of tumour cell (1=well, 2=moderate, 3=poor). The more the better because it is more like colon cells. |categorical
extent | Extent of local spread, what cells did he reach(1=submucosa, 2=muscle, 3=serosa, 4=contiguous structures). The less the better.| categorical
surg | Time from surgery to registration (0=short, 1=long) | categorical
node4 | More than 4 positive lymph nodes | binary
etype | Event type: 1=recurrence, 2=death | categorical



 - Co na nim będziemy modelować (treatment a survival rate).
 Modele przewidują śmiertelność danego pacjenta w zależności odpodanego leku oraz skuteczność leku, czyli czy poprawił stan zdrowotny pacjenta, czy nie.




 - Wstępne uzasadnienie dlaczego warto tym się zająć i dlaczego dobrze będzie tu cokolwiek wyjaśniać [ad 5].


## Model 
TODO(oryginał): Place a description of the model(s) here. Focus on key information on the design and quality of the model(s) developed.
 - Jaki model wybraliśmy?
 - Jak trzeba było przygotować dataset?
 - Jakie ma osiągi?
 - Jakieś miary typu F1, accuracy i opis tego, które miary na tym zbiorze powinno się stosować.
Model do przewidywania skuteczności leku został stworzony za pomocą algorytmu ExtraTrees z pakietu sklearn.
 Test -> AUC = 90.98%
 Train -> AUC = 90.31%

 	columns 	|importance
	status 	    |0.747059
 	node4 	    |0.101439
 	treatment 	|0.026713
	extent 	    |0.024557
 	adhere 	    |0.022921
 	nodes 	    |0.022467
 	age 	    |0.018148
 	perfor 	    |0.010347
 	obstruct 	|0.007869
 	sex 	    |0.007074
 	surg 	    |0.006733
 	differ 	    |0.004674

Model do przewidywania śmiertelności w zależności od podanego leku został stworzony za pomocą algorytmu UpliftTreeClassifier z pakietu casualml.

Przewidywanie leczenia:
Acc = 43.27%
Przewidywanie nawrotu choroby:
AUC = 55.35%

## Explanations
TODO:(oryginał):
> Here, show how XAI techniques can be used to solve the problem.
> Will dataset specific or instance specific techniques help more?
>
> Will XAI be useful before (pre), during (in) or after (post) modeling?
>
> What is interesting to learn from the XAI analysis?

 - Jak w ogóle to wyjaśniać skoro np. możemy mieć dwa modele?
 - Wizualizacje dopracować (czytelne wykresy, opisy itp.) [ad 4].

### Dataset Level Explainations
 - Jaka jest istotność zmiennych?

### Instance Level Explainations
 - Jakieś "ciekawe" przypadki?


## Summary and conclusions 
TODO:(oryginał):
> Here add the most important conclusions related to the XAI analysis.
> What did you learn? 
> Where were the biggest difficulties?
> What else did you recommend?

 - Jakich informacji XAI nam dostarczyło na temat tego problemu?
 - Jak XAI sprawdza się do wyjaśniania upliftu?
 - Dlaczego było warto to modelować (konkretnie ten dataset) [ad 5].
